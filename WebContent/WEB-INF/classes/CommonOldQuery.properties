GET_BROKER_BRANCH_CODE=SELECT NVL(BRANCH_CODE,'01') FROM BROKER_COMPANY_MASTER WHERE AGENCY_CODE = (SELECT AGENCY_CODE FROM LOGIN_MASTER WHERE LOGIN_ID IN (''{0}''))
GET_DEBITNO_SEQ = SELECT 'DN'||DEBIT_NUMBER_SEQ.NEXTVAL FROM DUAL
GET_CERDITNO_SEQ = SELECT 'CN'||CREDIT_NUMBER_SEQ.NEXTVAL FROM DUAL
TRAVEL_GET_CUSTOMER_DETAILS = SELECT pi.CUSTOMER_ID, NVL(pi.FIRST_NAME,'') ||' '|| NVL(pi.LAST_NAME,'') CUS_NAME, pi.NATIONALITY, to_date(pi.DOB,'dd/mm/yyyy') DOB, pi.GENDER, pi.TELEPHONE, pi.MOBILE, pi.FAX, pi.EMAIL, (pi.ADDRESS1||''|| pi.ADDRESS2) address, pi.OCCUPATION,pi.POBOX, pi.COUNTRY, pi.EMIRATE FROM PERSONAL_INFO pi, HOME_POSITION_MASTER hpm WHERE pi.CUSTOMER_ID = hpm.CUSTOMER_ID and hpm.qUOTE_NO =? AND hpm.PRODUCT_ID = ? and pi.status='Y' AND pi.amend_id=(select max(amend_id) from PERSONAL_INFO where CUSTOMER_ID=PI.CUSTOMER_ID)
travel.report.chart.portfolio= SELECT  COUNT( a.quote_no) FROM HOME_POSITION_MASTER a, personal_info b    WHERE A.EFFECTIVE_DATE<=SYSDATE and {0}  a.status= ''P'' AND a.AMEND_ID=''0'' AND b.customer_id= a.customer_id  AND a.product_id=? and a.APPLICATION_ID=?  AND B.STATUS = ''Y'' AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=B.CUSTOMER_ID)
travel.report.chart.quoteregister.lapsed=SELECT COUNT(a.quote_no)  FROM HOME_POSITION_MASTER a, personal_info PI WHERE A.effective_Date < SYSDATE and A.effective_Date+30 >=SYSDATE and {0} a.product_id =? and a.APPLICATION_ID=? AND a.status=''Y''  AND PI.customer_id = a.customer_id  AND PI.STATUS = ''Y'' AND PI.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=PI.CUSTOMER_ID)
travel.quoteregister.chart.existing=SELECT COUNT( a.quote_no) FROM HOME_POSITION_MASTER a, personal_info b  WHERE {0}  A.effective_Date >= SYSDATE  AND a.status = ''Y'' AND a.remarks IS NULL  AND a.ADMIN_REFERRAL_STATUS IS NULL  AND b.customer_id = a.customer_id  AND a.product_id = ? AND a.APPLICATION_ID = ? AND a.payment_status IS NULL AND A.quote_no IS NOT NULL AND B.STATUS = ''Y'' AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=B.CUSTOMER_ID)
travel.report.referral.chart.unapproved=SELECT COUNT( a.quote_no) FROM home_position_master a, personal_info b   WHERE {0} A.effective_Date >= SYSDATE AND a.status = ''Y'' AND b.customer_id = a.customer_id  AND (a.REMARKS IN (''Referal''))  AND a.product_id =? AND a.APPLICATION_ID = ? AND a.PAYMENT_STATUS IS NULL AND A.QUOTE_NO IS NOT NULL AND B.STATUS = ''Y'' AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=B.CUSTOMER_ID)
travel.report.referral.chart.approved=SELECT COUNT( a.quote_no) FROM home_position_master a, personal_info b  WHERE {0} A.effective_Date >= SYSDATE AND a.status = ''Y'' AND b.customer_id = a.customer_id  AND (a.REMARKS IN (''Admin''))  AND a.product_id =?  and a.APPLICATION_ID=? AND a.PAYMENT_STATUS IS NULL AND A.QUOTE_NO IS NOT NULL AND B.STATUS = ''Y'' AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=B.CUSTOMER_ID)
travel.report.referral.chart.reject=SELECT COUNT( a.quote_no) FROM home_position_master a, personal_info b  WHERE {0} A.effective_date >= SYSDATE AND a.status = ''R'' AND b.customer_id = a.customer_id  AND (a.REMARKS IN (''Referal''))  AND a.product_id =?  and a.APPLICATION_ID=? AND  a.PAYMENT_STATUS IS NULL AND A.QUOTE_NO IS NOT NULL AND B.STATUS = ''Y'' AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=B.CUSTOMER_ID)
travel.report.chart.portfolio.amount= SELECT  sum( a.OVERALL_PREMIUM) FROM HOME_POSITION_MASTER a, personal_info b  WHERE A.EFFECTIVE_DATE<=SYSDATE AND {0}  a.status= ''P'' AND a.AMEND_ID=''0'' AND b.customer_id= a.customer_id  AND a.product_id=? and a.APPLICATION_ID=? AND B.STATUS = ''Y'' AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=B.CUSTOMER_ID)
travel.report.chart.quoteregister.lapsed.amount=SELECT sum( a.OVERALL_PREMIUM)  FROM HOME_POSITION_MASTER a, personal_info PI WHERE A.effective_Date < SYSDATE and A.effective_Date+30 >= SYSDATE and  {0} a.product_id =? and a.APPLICATION_ID=?  AND  a.status=''Y''  AND PI.customer_id = a.customer_id AND PI.STATUS = ''Y'' AND PI.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=PI.CUSTOMER_ID)
travel.quoteregister.chart.existing.amount=SELECT sum( a.OVERALL_PREMIUM) FROM HOME_POSITION_MASTER a, personal_info b  WHERE {0}  A.effective_Date >= SYSDATE  AND a.status = ''Y'' AND a.remarks IS NULL  AND a.ADMIN_REFERRAL_STATUS IS NULL  AND b.customer_id = a.customer_id  AND a.product_id =? AND a.APPLICATION_ID = ? AND a.payment_status IS NULL AND A.quote_no IS NOT NULL AND B.STATUS = ''Y'' AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=B.CUSTOMER_ID)
travel.report.referral.chart.unapproved.amount=SELECT sum( a.OVERALL_PREMIUM) FROM home_position_master a, personal_info b   WHERE {0} A.effective_Date >\= SYSDATE AND a.status \= ''Y'' AND b.customer_id \= a.customer_id  AND (a.REMARKS IN (''Referal''))  AND a.product_id \=? AND a.APPLICATION_ID \= ? AND a.PAYMENT_STATUS IS NULL AND A.QUOTE_NO IS NOT NULL AND B.STATUS \= ''Y'' AND B.AMEND_ID\=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID\=B.CUSTOMER_ID)
travel.report.referral.chart.approved.amount=SELECT sum( a.OVERALL_PREMIUM) FROM home_position_master a, personal_info b  WHERE {0} A.effective_Date >\= SYSDATE AND a.status \= ''Y'' AND b.customer_id \= a.customer_id  AND (a.REMARKS IN (''Admin''))  AND a.product_id \=?  and a.APPLICATION_ID\=? AND a.PAYMENT_STATUS IS NULL AND A.QUOTE_NO IS NOT NULL AND B.STATUS \= ''Y'' AND B.AMEND_ID\=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID\=B.CUSTOMER_ID)
travel.report.referral.chart.reject.amount=SELECT sum( a.OVERALL_PREMIUM) FROM home_position_master a, personal_info b  WHERE {0} (A.STATUS IN (''D'', ''R'')) AND b.customer_id = a.customer_id AND a.product_id =?  and a.APPLICATION_ID=? AND a.PAYMENT_STATUS IS NULL AND A.effective_Date  >= SYSDATE AND B.STATUS = ''Y'' AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=B.CUSTOMER_ID)
travel.issuer.brokerList=SELECT DISTINCT(A.LOGIN_ID) LOGIN_ID,D.USERNAME FROM HOME_POSITION_MASTER A,PERSONAL_INFO B,BROKER_COMPANY_MASTER C, LOGIN_MASTER D WHERE A.PRODUCT_ID = ? AND A.INCEPTION_DATE <= SYSDATE AND A.APPLICATION_ID NOT IN (?,'1') AND C.AGENCY_CODE=D.OA_CODE AND C.BRANCH_CODE=? AND D.LOGIN_ID=A.LOGIN_ID
travel.userlist.issuer=SELECT DISTINCT PM.LOGIN_ID LOGIN_ID,PM.LOGIN_ID FIRST_NAME,BCM.COMPANY_NAME USERNAME FROM HOME_POSITION_MASTER PM,LOGIN_MASTER LM, BROKER_COMPANY_MASTER BCM WHERE PM.APPLICATION_ID = ? AND LM.LOGIN_ID=PM.LOGIN_ID AND LM.OA_CODE=BCM.AGENCY_CODE AND PM.STATUS in ('P','Y') AND PM.PRODUCT_ID = ?
travel.report.portfolio=SELECT HPM.POLICY_NO,HPM.APPLICATION_NO,HPM.CUSTOMER_ID,HPM.OVERALL_PREMIUM,TO_CHAR(HPM.EFFECTIVE_DATE,''DD/MM/YYYY'') QUOTATION_DATE,NVL (PI.COMPANY_NAME, PI.FIRST_NAME) CUSTOMER_NAME,PI.LAST_NAME,HPM.LOGIN_ID,HPM.QUOTE_NO,HPM.EXCESS_PREMIUM,PI.COMPANY_NAME,HPM.INCEPTION_DATE,NULL OPEN_COVER_NO,DEBIT_NOTE_NO,NULL CREDIT_NOTE_NO,HPM.AMEND_ID,BCM.COMPANY_NAME BROKER_NAME FROM HOME_POSITION_MASTER HPM, PERSONAL_INFO PI ,BROKER_COMPANY_MASTER BCM ,LOGIN_MASTER LM WHERE HPM.LOGIN_ID = ? AND HPM.STATUS = ''P'' AND HPM.AMEND_ID=''0'' AND PI.CUSTOMER_ID = HPM.CUSTOMER_ID AND HPM.PRODUCT_ID = ? {0} AND PI.STATUS=''Y'' AND PI.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=PI.CUSTOMER_ID) AND HPM.LOGIN_ID=LM.LOGIN_ID AND LM.OA_CODE = BCM.AGENCY_CODE
travel.report.referral.unapproved=SELECT a.quote_no,a.customer_id, TO_CHAR(A.EFFECTIVE_DATE-30,''DD/MM/YYYY'') QUOTATION_DATE,B.FIRST_NAME CUSTOMER_NAME, A.LOGIN_ID, A.APPLICATION_NO, B.COMPANY_NAME, null OPEN_COVER_NO  FROM   home_position_master a, personal_info b   WHERE       a.login_id =?  AND a.status = ''Y''  AND b.customer_id = a.customer_id  AND (a.REMARKS IN (''Referal''))  AND a.product_id =? and a.APPLICATION_ID IN (''{0}'')  AND a.PAYMENT_STATUS IS NULL AND A.QUOTE_NO IS NOT NULL AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=B.CUSTOMER_ID) and B.STATUS=''Y''
travel.report.referral.approved=SELECT a.quote_no, a.customer_id,TO_CHAR(A.EFFECTIVE_DATE-30,''DD/MM/YYYY'') QUOTATION_DATE, B.FIRST_NAME CUSTOMER_NAME, A.LOGIN_ID, A.APPLICATION_NO, B.COMPANY_NAME, null OPEN_COVER_NO FROM   home_position_master a, personal_info b  WHERE       a.login_id =?  AND a.status = ''Y''  AND b.customer_id = a.customer_id  AND (a.REMARKS IN (''Admin''))  AND a.product_id =? and a.APPLICATION_ID IN (''{0}'')   AND a.PAYMENT_STATUS IS NULL AND A.QUOTE_NO IS NOT NULL AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=B.CUSTOMER_ID) and B.STATUS=''Y''
travel.report.referral.reject=SELECT   a.quote_no, a.LAPSED_REMARKS,TO_DATE(A.LAPSED_DATE,''DD/MM/YYYY'') LAPSED_DATE, a.customer_id, TO_CHAR(A.EFFECTIVE_DATE-30,''DD/MM/YYYY'') AS QUOTATION_DATE, B.FIRST_NAME CUSTOMER_NAME, A.LOGIN_ID, A.APPLICATION_NO, B.COMPANY_NAME, NULL OPEN_COVER_NO FROM   home_position_master a, personal_info b WHERE a.login_id = ? AND (A.STATUS IN (''R'')) AND b.customer_id = a.customer_id AND a.product_id = ? and a.APPLICATION_ID IN (''{0}'') AND a.PAYMENT_STATUS IS NULL AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=B.CUSTOMER_ID) and B.STATUS=''Y''
travel.report.lapsedquote=SELECT A.QUOTE_NO,a.LAPSED_REMARKS,TO_CHAR(A.LAPSED_DATE,''DD/MM/YYYY'') LAPSED_DATE,A.APPLICATION_NO, A.CUSTOMER_ID, TO_CHAR(A.EFFECTIVE_DATE-30,''DD/MM/YYYY'')  QUOTATION_DATE, TO_CHAR(A.EFFECTIVE_DATE,''DD/MM/YYYY'') VALIDITY_PERIOD, B.FIRST_NAME CUSTOMER_NAME, A.LOGIN_ID, A.STATUS, A.APPLICATION_NO, B.COMPANY_NAME,   ''Rejected''  REJECT_DESC  FROM HOME_POSITION_MASTER A, PERSONAL_INFO B WHERE A.LOGIN_ID =?  AND (A.STATUS IN (''D''))  AND B.CUSTOMER_ID  = A.CUSTOMER_ID  AND A.PRODUCT_ID = ? AND A.APPLICATION_ID IN (''{0}'') AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=B.CUSTOMER_ID) and B.STATUS=''Y''
travel.report.policy=SELECT A.POLICY_NO,TO_CHAR(A.INCEPTION_DATE,'DD/MM/YYYY') INCEPTION_DATE,A.OVERALL_PREMIUM,A.REMARKS,A.LOGIN_ID,A.QUOTE_NO,A.DEBIT_NOTE_NO,A.RECEIPT_NO,NVL(B.COMPANY_NAME,B.FIRST_NAME) INSURED_NAME,A.COMMISSION,NVL(A.PAYMENT_MODE,'-') PAYMENT_MODE,TO_CHAR(A.EFFECTIVE_DATE,'DD/MM/YYYY') EFFECTIVE_DATE,TO_CHAR(A.EXPIRY_DATE,'DD/MM/YYYY') EXPIRY_DATE,PM.PRODUCT_DESCRIPTION,NVL(PM.BROKER_ID,'Travel') FROM HOME_POSITION_MASTER A,PERSONAL_INFO B,HOME_PRODUCT_MASTER PM WHERE A.EFFECTIVE_DATE BETWEEN TO_DATE(?,'DD/MM/YYYY') AND TO_DATE(?,'DD/MM/YYYY')+1 AND A.LOGIN_ID IN (?) AND A.STATUS='P' AND  A.PRODUCT_ID=? AND A.DEBIT_NOTE_NO IS NOT NULL AND A.CUSTOMER_ID=B.CUSTOMER_ID AND PM.PRODUCT_ID = A.PRODUCT_ID  AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=B.CUSTOMER_ID) and B.STATUS='Y'  and PM.STATUS='Y' ORDER BY A.EFFECTIVE_DATE DESC
travel.quote.detail=SELECT A.CUSTOMER_ID, A.QUOTE_NO,TO_CHAR(A.EFFECTIVE_DATE-30,'DD/MM/YYYY') QUOTE_DATE, TO_CHAR(A.EFFECTIVE_DATE,'DD/MM/YYYY') VALIDITY_DATE, NVL (B.FIRST_NAME, B.COMPANY_NAME) CUSTOMER_NAME FROM HOME_POSITION_MASTER A, PERSONAL_INFO B WHERE A.QUOTE_NO = ? AND A.CUSTOMER_ID = B.CUSTOMER_ID AND B.STATUS = 'Y' AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=B.CUSTOMER_ID)
travel.lapsed.update=UPDATE HOME_POSITION_MASTER SET STATUS= 'D',LAPSED_REMARKS=?,LAPSED_DATE=SYSDATE, LAPSED_UPDATED_BY=? WHERE QUOTE_NO=?
travel.active.lapsed=UPDATE HOME_POSITION_MASTER SET EFFECTIVE_DATE\=SYSDATE+30,INCEPTION_DATE\=SYSDATE WHERE QUOTE_NO\=?
travel.report.searchByQuote=SELECT   hpm.APPLICATION_NO,hpm.QUOTE_NO,hpm.CUSTOMER_ID,TO_CHAR(hpm.EFFECTIVE_DATE-30,'DD/MM/YYYY') QUOTATION_DATE, TO_CHAR(hpm.EFFECTIVE_DATE,'DD/MM/YYYY') VALIDITY_DATE, NVL (pi.COMPANY_NAME, pi.FIRST_NAME) CUSTOMER_NAME,hpm.LOGIN_ID,pi.COMPANY_NAME, TO_CHAR(hpm.INCEPTION_DATE,'DD/MM/YYYY') INCEPTION_DATE, NVL (hpm.PREMIUM, 0)  PREMIUM, hpm.EFFECTIVE_DATE, hpm.POLICY_NO, CASE  WHEN     hpm.STATUS = 'Y' AND hpm.REMARKS IN ('Admin', 'NORMAL_EXCESS_PRICE') THEN 'RA' ELSE case when hpm.STATUS = 'Y' AND trunc(HPM.EFFECTIVE_DATE) >= trunc(SYSDATE) AND hpm.remarks IS NULL AND hpm.ADMIN_REFERRAL_STATUS IS NULL then 'Q' else hpm.STATUS END end AS STATUS  FROM   HOME_POSITION_MASTER HPM ,PERSONAL_INFO PI   WHERE       hpm.LOGIN_ID=? AND hpm.CUSTOMER_ID = pi.CUSTOMER_ID  AND hpm.PRODUCT_ID =?   AND hpm.APPLICATION_ID = NVL(CASE HPM.APPLICATION_ID WHEN ? THEN  NULL ELSE  '1' END,HPM.APPLICATION_ID)  AND QUOTE_NO LIKE ? AND PI.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=PI.CUSTOMER_ID) and PI.STATUS='Y' ORDER BY QUOTE_NO DESC
travel.report.searchByPolicy=SELECT   hpm.APPLICATION_NO,hpm.QUOTE_NO,hpm.CUSTOMER_ID,TO_CHAR(hpm.EFFECTIVE_DATE-30,'DD/MM/YYYY') QUOTATION_DATE, TO_CHAR(hpm.EFFECTIVE_DATE,'DD/MM/YYYY') VALIDITY_DATE, NVL (pi.COMPANY_NAME, pi.FIRST_NAME) CUSTOMER_NAME,hpm.LOGIN_ID,pi.COMPANY_NAME, TO_CHAR(hpm.INCEPTION_DATE,'DD/MM/YYYY') INCEPTION_DATE, NVL (hpm.PREMIUM, 0)  PREMIUM, hpm.EFFECTIVE_DATE, hpm.POLICY_NO, CASE  WHEN     hpm.STATUS = 'Y' AND hpm.REMARKS IN ('Admin', 'NORMAL_EXCESS_PRICE') THEN 'RA' ELSE case when hpm.STATUS = 'Y' AND trunc(HPM.EFFECTIVE_DATE) >= trunc(SYSDATE) AND hpm.remarks IS NULL AND hpm.ADMIN_REFERRAL_STATUS IS NULL then 'Q' else hpm.STATUS END end AS STATUS  FROM   HOME_POSITION_MASTER HPM ,PERSONAL_INFO PI   WHERE       hpm.LOGIN_ID=? AND hpm.CUSTOMER_ID = pi.CUSTOMER_ID  AND hpm.PRODUCT_ID =?   AND hpm.APPLICATION_ID = NVL(CASE HPM.APPLICATION_ID WHEN ? THEN  NULL ELSE  '1' END,HPM.APPLICATION_ID)  AND POLICY_NO LIKE ? AND PI.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=PI.CUSTOMER_ID) and PI.STATUS='Y' ORDER BY QUOTE_NO DESC
travel.report.searchByCustomer=SELECT   hpm.APPLICATION_NO,hpm.QUOTE_NO,hpm.CUSTOMER_ID,TO_CHAR(hpm.EFFECTIVE_DATE-30,'DD/MM/YYYY') QUOTATION_DATE, TO_CHAR(hpm.EFFECTIVE_DATE,'DD/MM/YYYY') VALIDITY_DATE, NVL (pi.COMPANY_NAME, pi.FIRST_NAME) CUSTOMER_NAME,hpm.LOGIN_ID,pi.COMPANY_NAME, TO_CHAR(hpm.INCEPTION_DATE,'DD/MM/YYYY') INCEPTION_DATE, NVL (hpm.PREMIUM, 0)  PREMIUM, hpm.EFFECTIVE_DATE, hpm.POLICY_NO, CASE  WHEN     hpm.STATUS = 'Y' AND hpm.REMARKS IN ('Admin', 'NORMAL_EXCESS_PRICE') THEN 'RA' ELSE case when hpm.STATUS = 'Y' AND trunc(HPM.EFFECTIVE_DATE) >= trunc(SYSDATE) AND hpm.remarks IS NULL AND hpm.ADMIN_REFERRAL_STATUS IS NULL then 'Q' else hpm.STATUS END end AS STATUS  FROM   HOME_POSITION_MASTER HPM ,PERSONAL_INFO PI   WHERE       hpm.LOGIN_ID=? AND hpm.CUSTOMER_ID = pi.CUSTOMER_ID  AND hpm.PRODUCT_ID =?   AND hpm.APPLICATION_ID = NVL(CASE HPM.APPLICATION_ID WHEN ? THEN  NULL ELSE  '1' END,HPM.APPLICATION_ID) AND (LOWER(LTRIM(RTRIM(PI.COMPANY_NAME))) LIKE LOWER(LTRIM(RTRIM(?))) OR LOWER(LTRIM(RTRIM(PI.FIRST_NAME))) LIKE LOWER(LTRIM(RTRIM(?)))) AND PI.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=PI.CUSTOMER_ID) and PI.STATUS='Y' ORDER BY QUOTE_NO DESC
travel.report.searchByQuoteOthers=SELECT  A.APPLICATION_NO,A.QUOTE_NO, A.CUSTOMER_ID, TO_CHAR(A.EFFECTIVE_DATE-30,'DD/MM/YYYY') QUOTATION_DATE, TO_CHAR(A.EFFECTIVE_DATE,'DD/MM/YYYY') VALIDITY_DATE, NVL (B.COMPANY_NAME, B.FIRST_NAME) CUSTOMER_NAME, A.LOGIN_ID, B.COMPANY_NAME, A.EFFECTIVE_DATE, NVL (M.OPEN_COVER_NO, '0'), (NVL (M.PREMIUM, 0) + NVL (M.EXCESS_PREMIUM, 0)) PREMIUM,TO_CHAR(A.INCEPTION_DATE,'DD/MM/YYYY') INCEPTION_DATE,A.POLICY_NO,CASE WHEN A.STATUS='Y' AND A.REMARKS IN ('Admin', 'NORMAL_EXCESS_PRICE') AND M.ADMIN_REFERRAL_STATUS  = 'N' THEN 'RA' ELSE A.STATUS END AS STATUS FROM POSITION_MASTER A, PERSONAL_INFO B, MARINE_DATA M WHERE A.LOGIN_ID =? AND (A.FREIGHT_STATUS NOT IN ('F', 'B') OR A.FREIGHT_STATUS IS NULL) AND trunc(A.EFFECTIVE_DATE) > =trunc(SYSDATE) AND M.APPLICATION_NO  = A.APPLICATION_NO AND B.CUSTOMER_ID = A.CUSTOMER_ID AND A.PRODUCT_ID = ? AND A.APPLICATION_ID NOT IN (?,'1') AND NVL(A.OPEN_COVER_NO,'0') = NVL(?,'0') AND QUOTE_NO LIKE ? AND B.AMEND_ID=( SELECT MAX(AMEND_ID) FROM PERSONAL_INFO WHERE CUSTOMER_ID=PI.CUSTOMER_ID) and B.STATUS='Y' ORDER BY QUOTE_NO DESC
travel.copyquote.quoteNo=SELECT PM.QUOTE_NO, PI.FIRST_NAME, (nvl(pm.PREMIUM,0) + nvl(pm.POLICY_FEE,0)) PREMIUM FROM HOME_POSITION_MASTER PM, LOGIN_MASTER LM, PERSONAL_INFO PI WHERE       PI.CUSTOMER_ID \= PM.CUSTOMER_ID AND PM.QUOTE_NO\=? AND LM.LOGIN_ID \= PM.LOGIN_ID  AND (PM.LOGIN_ID\=? OR PM.APPLICATION_ID IN ('1','2')) AND PM.PRODUCT_ID\=? AND PI.STATUS \= 'Y' AND PM.REMARKS IS NULL AND PM.ADMIN_REFERRAL_STATUS IS NULL AND PM.PAYMENT_STATUS IS NULL AND PM.QUOTE_NO IS NOT NULL  AND (TRUNC(PM.EFFECTIVE_DATE) >\= TRUNC(SYSDATE)  OR PM.STATUS \!\= 'Y') AND (PM.STATUS \= 'Y' OR PM.STATUS \= 'P') AND PI.AMEND_ID \= (SELECT   MAX (AMEND_ID) FROM   PERSONAL_INFO WHERE   CUSTOMER_ID \= PI.CUSTOMER_ID) ORDER BY   PM.EFFECTIVE_DATE DESC
travel.copyquote.policyNo=SELECT PM.QUOTE_NO, PI.FIRST_NAME, (nvl(pm.PREMIUM,0) + nvl(pm.POLICY_FEE,0)) PREMIUM FROM HOME_POSITION_MASTER PM, LOGIN_MASTER LM, PERSONAL_INFO PI WHERE    PI.CUSTOMER_ID \= PM.CUSTOMER_ID AND PM.POLICY_NO\=? AND LM.LOGIN_ID \= PM.LOGIN_ID AND (PM.LOGIN_ID\=? OR PM.APPLICATION_ID IN ('1','2')) AND PM.PRODUCT_ID\=? AND PI.STATUS \= 'Y' AND PM.REMARKS IS NULL AND PM.ADMIN_REFERRAL_STATUS IS NULL AND PM.PAYMENT_STATUS IS NULL AND PM.QUOTE_NO IS NOT NULL AND (TRUNC(PM.EFFECTIVE_DATE) >\= TRUNC(SYSDATE)  OR PM.STATUS \!\= 'Y') AND (PM.STATUS \= 'Y' OR PM.STATUS \= 'P') AND PI.AMEND_ID \= (SELECT   MAX (AMEND_ID) FROM   PERSONAL_INFO WHERE   CUSTOMER_ID \= PI.CUSTOMER_ID) ORDER BY   PM.EFFECTIVE_DATE DESC
travel.copyquote.custName=SELECT PM.QUOTE_NO, PI.FIRST_NAME, (nvl(pm.PREMIUM,0) + nvl(pm.POLICY_FEE,0)) PREMIUM FROM HOME_POSITION_MASTER PM, LOGIN_MASTER LM, PERSONAL_INFO PI WHERE   PI.CUSTOMER_ID \= PM.CUSTOMER_ID AND UPPER (PI.FIRST_NAME) \= UPPER (?) AND LM.LOGIN_ID \= PM.LOGIN_ID AND PI.STATUS \= 'Y' AND PM.REMARKS IS NULL AND PM.ADMIN_REFERRAL_STATUS IS NULL AND PM.PAYMENT_STATUS IS NULL AND PM.QUOTE_NO IS NOT NULL AND PM.LOGIN_ID\=? AND PM.PRODUCT_ID\=? AND (TRUNC(PM.EFFECTIVE_DATE) >\= TRUNC(SYSDATE) OR PM.STATUS \!\= 'Y') AND (PM.STATUS \= 'Y' OR PM.STATUS \= 'P')   AND PI.AMEND_ID \= (SELECT   MAX (AMEND_ID) FROM   PERSONAL_INFO WHERE   CUSTOMER_ID \= PI.CUSTOMER_ID) ORDER BY   PM.EFFECTIVE_DATE DESC